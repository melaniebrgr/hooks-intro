import { Notes } from "mdx-deck";
import CodeSandbox from "./components/CodeSandbox.js";
import Box from "./components/Box";

import { syntaxHighlighterPrism } from "mdx-deck/themes";
import nightOwl from "prism-react-renderer/themes/nightOwl";
export const theme = syntaxHighlighterPrism;

# React Hooks

- new feature in React 16.8
- compatible with existing React code

<Notes>
  No prior knowledge assumed. Shared what I've learned... Jeff is going to
  walkthrough...
</Notes>

---

# Hooks are...

- functions that "hook" into React features
- attach behaviours to functional components
- composable and shareable

<Notes>
  Replace setState, lifecycle methods without having to create a class. Like a
  React Primitive for stateful logic.
</Notes>

---

# Why Hooks

- avoid long classes
- group related side-effect logic
- address the problems HOCs and render props solve
- instead of learning a library like recompose, "just use React"

<Notes>
  HOCs wrapper hell, render props false hierarchy. Andrew Clark, stopped
  maintaining recompose, because "Hooks solves all the problems I attempted to
  address with Recompose three years ago, and more on top of that" (1).
</Notes>

---

# Types

- `useState`
- `useReducer`
- `useEffect`
- ...build your own custom hooks

<Notes>10 hook types built into React</Notes>

---

# `useState` Hook

```js
const [count, setCount] = useState(0);
```

- takes initial state, returns the current state and an updater
- updater takes a new state value or a function
- calling updater queues a component re-render
- replaces `setState`

<Notes>Why useState and not createState...?</Notes>

---

# Example: Refactor to `useState`

<Box width={"100vw"}>
  <CodeSandbox src={`https://codesandbox.io/embed/w67j72v2mw?fontsize=14`} />
</Box>

---

# Comparison: Forms with Classes

<Box width={"100vw"}>
  <CodeSandbox
    src={`https://codesandbox.io/embed/github/e-schultz/ts-js-react-training/tree/master/examples/forms-with-classes?fontsize=14`}
  />
</Box>

---

# Comparison: Forms with Hooks

<Box width={"100vw"}>
  <CodeSandbox
    src={`https://codesandbox.io/embed/github/e-schultz/ts-js-react-training/tree/master/examples/forms-with-hooks?fontsize=14`}
  />
</Box>

---

# `useReducer` Hook

```js
const [state, dispatch] = useReducer(reducer, initialState);
```

- an alternative to `useState`
- prefer `useReducer` when...
  - state logic is complex or nested (is an object)
  - there is a lot of state in the component and want to collocate

---

# `useEffect` Hook

```js
useEffect(didUpdate, ?dependencies);
```

- use for fetching data, timers, intervals, logging
- use for effects previously called in CDM, CDU, CWU
- dependencies determine when effect runs

---

# `useEffect` with State

![useEffect](/use-effect.png "Ryan Florence useEffect")

"whenever this state changes, run this effect"

<Notes>not a replacement for CDM, CDU, CWU</Notes>

---

# Example: `useEffect` State Dependencies

<Box width={"100vw"}>
  <CodeSandbox src={`https://codesandbox.io/embed/jlpxj27l6w?fontsize=14`} />
</Box>

---

# References

1. https://github.com/acdlite/recompose/commit/7867de653abbb57a49934e52622a60b433bda918
